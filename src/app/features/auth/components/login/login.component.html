<div class="flex justify-center items-center min-h-screen px-4 bg-gray-50 dark:bg-gray-900">
  <p-card
    header="Iniciar sesión"
    styleClass="w-full sm:max-w-xl p-6 rounded-xl shadow-6 login-card"
  >
    <form
      [formGroup]="loginForm"
      (ngSubmit)="onSubmit()"
      class="p-fluid flex flex-col gap-4 w-[200]"
    >
      <!-- Email -->
      <div>
        <label for="email" class="block text-sm text-gray-700 dark:text-gray-300">Email</label>
        <span class="p-input-icon-left w-full">
          <i class="pi pi-envelope"></i>
          <input
            id="email"
            type="email"
            pInputText
            placeholder="tú@correo.com"
            formControlName="email"
            class="w-full"
            style="margin-left: 2em"
            [ngClass]="{
              'ng-invalid ng-dirty':
                loginForm.get('email')?.invalid && loginForm.get('email')?.touched
            }"
          />
        </span>
        <small
          *ngIf="loginForm.get('email')?.invalid && loginForm.get('email')?.touched"
          class="p-error"
        >
          Email inválido
        </small>
      </div>

      <!-- Password -->
      <div>
        <label for="password" class="block text-sm text-gray-700 dark:text-gray-300"
          >Contraseña</label
        >
        <span class="p-input-icon-left w-full">
          <i class="pi pi-lock"></i>
          <input
            id="password"
            type="password"
            pInputText
            placeholder="••••••••"
            formControlName="password"
            class="w-full"
            style="margin-left: 2em"
            [ngClass]="{
              'ng-invalid ng-dirty':
                loginForm.get('password')?.invalid && loginForm.get('password')?.touched
            }"
          />
        </span>
        <small
          *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
          class="p-error"
        >
          La contraseña es obligatoria
        </small>
      </div>

      <!-- Errores globales -->
      <p-messages
        *ngIf="error$ | async as error"
        [value]="[{ severity: 'error', summary: 'Error', detail: error }]"
        [closable]="true"
        class="p-mb-2"
      ></p-messages>

      <!-- Botón Iniciar sesión -->
      <button
        pButton
        type="submit"
        class="p-button-success p-button-rounded p-button-block"
        [disabled]="loginForm.invalid || (loading$ | async)"
      >
        <ng-container *ngIf="loading$ | async; else labelTexto">
          <i class="pi pi-spin pi-spinner mr-2"></i> Cargando...
        </ng-container>
        <ng-template #labelTexto>Iniciar sesión</ng-template>
      </button>

      <!-- Link a registro -->
      <div class="text-center text-sm mt-3 text-gray-500 dark:text-gray-400">
        ¿No tenés cuenta?
        <button
          type="button"
          class="text-primary font-semibold underline hover:text-blue-600 transition"
          (click)="irARegistro()"
        >
          Registrate
        </button>
      </div>
    </form>
  </p-card>
</div>
