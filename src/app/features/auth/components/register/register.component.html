<div class="flex justify-center items-center min-h-screen px-4 bg-gray-50 dark:bg-gray-900">
  <p-card
    header="Crear cuenta"
    styleClass="w-full sm:max-w-xl p-6 rounded-xl shadow-6 register-card"
  >
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="p-fluid flex flex-col gap-4">
      <!-- Email -->
      <div>
        <label for="email" class="block text-sm text-gray-700 dark:text-gray-300">Email</label>
        <span class="p-input-icon-left w-full">
          <i class="pi pi-envelope"></i>
          <input
            id="email"
            type="email"
            pInputText
            placeholder="tú@correo.com"
            formControlName="email"
            class="w-full"
            style="margin-left: 2em"
            [ngClass]="{
              'ng-invalid ng-dirty':
                registerForm.get('email')?.invalid && registerForm.get('email')?.touched
            }"
          />
        </span>
        <small
          *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
          class="p-error"
        >
          Email inválido
        </small>
      </div>

      <!-- Contraseña -->
      <div>
        <label for="password" class="block text-sm text-gray-700 dark:text-gray-300"
          >Contraseña</label
        >
        <span class="p-input-icon-left w-full">
          <i class="pi pi-lock"></i>
          <input
            id="password"
            type="password"
            pInputText
            placeholder="••••••••"
            formControlName="password"
            class="w-full"
            style="margin-left: 2em"
            [ngClass]="{
              'ng-invalid ng-dirty':
                registerForm.get('password')?.invalid && registerForm.get('password')?.touched
            }"
          />
        </span>
        <small
          *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"
          class="p-error"
        >
          La contraseña es obligatoria
        </small>
      </div>

      <!-- Mensaje de error -->
      <p-messages
        *ngIf="error$ | async as error"
        [value]="[{ severity: 'error', summary: 'Error', detail: error }]"
        [closable]="true"
        class="p-mb-2"
      ></p-messages>

      <!-- Botón crear cuenta -->
      <button
        pButton
        type="submit"
        class="p-button-primary p-button-rounded p-button-block"
        [disabled]="registerForm.invalid || (loading$ | async)"
      >
        <ng-container *ngIf="loading$ | async; else btnText">
          <i class="pi pi-spin pi-spinner mr-2"></i> Registrando...
        </ng-container>
        <ng-template #btnText>Registrarse</ng-template>
      </button>

      <!-- Ya tenes cuenta -->
      <div class="text-center text-sm mt-3 text-gray-500 dark:text-gray-400">
        ¿Ya tenés cuenta?
        <button
          type="button"
          class="text-primary font-semibold underline hover:text-blue-600 transition"
          (click)="irALogin()"
        >
          Iniciar sesión
        </button>
      </div>
    </form>
  </p-card>
</div>
